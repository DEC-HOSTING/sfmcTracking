<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskMaster - Unified Dashboard</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Modern task management dashboard with AI-powered assistance">
    <meta name="theme-color" content="#000000">
</head>
<body class="dashboard-body">
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <p>Loading your dashboard...</p>
    </div>

    <!-- Main Dashboard Container -->
    <div class="dashboard-container" id="dashboardContainer">
        <!-- Top Navigation Bar -->
        <header class="dashboard-header">
            <div class="header-left">
                <h1 class="app-title">TaskMaster</h1>
                <div class="user-info">
                    <span class="user-email">{{ user.email }}</span>
                </div>
            </div>
            
            <div class="header-actions">
                <button class="action-btn primary" id="newTaskBtn">
                    <span class="btn-icon">+</span>
                    New Task
                </button>
                <button class="action-btn secondary" id="askAIBtn">
                    <span class="btn-icon">ü§ñ</span>
                    Ask AI
                </button>
                <button class="action-btn ghost" id="logoutBtn">
                    <span class="btn-icon">‚éã</span>
                    Logout
                </button>
            </div>
        </header>

        <!-- Main Content Grid -->
        <main class="dashboard-main">
            <!-- Sidebar - Categories & Tasks -->
            <aside class="dashboard-sidebar" id="sidebar">
                <div class="sidebar-header">
                    <h2>Categories</h2>
                    <button class="sidebar-action" id="newCategoryBtn" title="Add Category">+</button>
                </div>

                <!-- Categories List -->
                <div class="categories-container" id="categoriesContainer">
                    <div class="loading-state">Loading categories...</div>
                </div>

                <!-- Quick AI Actions -->
                <div class="sidebar-footer">
                    <button class="ai-quick-action" id="generateTasksBtn">
                        <span class="ai-icon">‚ú®</span>
                        Generate Tasks with AI
                    </button>
                </div>
            </aside>

            <!-- Main Panel - Chat Interface -->
            <section class="dashboard-main-panel">
                <div class="panel-header">
                    <h2>AI Assistant</h2>
                    <div class="chat-status">
                        <span class="status-dot online"></span>
                        Ready to help
                    </div>
                </div>

                <!-- Chat Messages -->
                <div class="chat-messages" id="chatMessages">
                    <div class="welcome-message">
                        <div class="welcome-icon">ü§ñ</div>
                        <h3>Welcome to TaskMaster!</h3>
                        <p>I'm your AI assistant. I can help you:</p>
                        <ul>
                            <li>Create organized to-do lists</li>
                            <li>Plan projects and events</li>
                            <li>Answer questions about productivity</li>
                            <li>Suggest task improvements</li>
                        </ul>
                        <p>Try asking me to "Create a to-do list for planning a birthday party" or just chat freely!</p>
                    </div>
                </div>

                <!-- Chat Input -->
                <div class="chat-input-container">
                    <form class="chat-form" id="chatForm">
                        <div class="input-wrapper">
                            <textarea 
                                id="chatInput" 
                                placeholder="Ask me anything or request task generation..."
                                rows="1"
                                maxlength="2000"
                            ></textarea>
                            <button type="submit" class="send-btn" id="sendBtn">
                                <span class="send-icon">‚Üí</span>
                            </button>
                        </div>
                        <div class="input-footer">
                            <div class="char-counter">
                                <span id="charCount">0</span>/2000
                            </div>
                            <div class="quick-actions">
                                <button type="button" class="quick-action" data-prompt="Create a 5-item to-do list for">
                                    üìù Generate List
                                </button>
                                <button type="button" class="quick-action" data-prompt="Help me organize tasks for">
                                    üóÇÔ∏è Organize Tasks
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </section>
        </main>
    </div>

    <!-- Modals -->
    
    <!-- New Task Modal -->
    <div class="modal-overlay" id="taskModalOverlay">
        <div class="modal-container">
            <div class="modal-header">
                <h3>Create New Task</h3>
                <button class="modal-close" id="closeTaskModal">√ó</button>
            </div>
            <form class="modal-form" id="taskForm">
                <div class="form-group">
                    <label for="taskTitle">Title *</label>
                    <input type="text" id="taskTitle" required maxlength="200">
                </div>
                <div class="form-group">
                    <label for="taskDescription">Description</label>
                    <textarea id="taskDescription" rows="3" maxlength="500"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="taskCategory">Category *</label>
                        <select id="taskCategory" required>
                            <option value="">Select category...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="taskPriority">Priority</label>
                        <select id="taskPriority">
                            <option value="low">Low</option>
                            <option value="medium" selected>Medium</option>
                            <option value="high">High</option>
                        </select>
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn secondary" id="cancelTaskBtn">Cancel</button>
                    <button type="submit" class="btn primary">Create Task</button>
                </div>
            </form>
        </div>
    </div>

    <!-- New Category Modal -->
    <div class="modal-overlay" id="categoryModalOverlay">
        <div class="modal-container">
            <div class="modal-header">
                <h3>Create New Category</h3>
                <button class="modal-close" id="closeCategoryModal">√ó</button>
            </div>
            <form class="modal-form" id="categoryForm">
                <div class="form-group">
                    <label for="categoryName">Name *</label>
                    <input type="text" id="categoryName" required maxlength="100">
                </div>
                <div class="form-group">
                    <label for="categoryColor">Color</label>
                    <div class="color-picker">
                        <input type="radio" name="categoryColor" value="#000000" id="color1" checked>
                        <label for="color1" class="color-option" style="background: #000000"></label>
                        
                        <input type="radio" name="categoryColor" value="#333333" id="color2">
                        <label for="color2" class="color-option" style="background: #333333"></label>
                        
                        <input type="radio" name="categoryColor" value="#666666" id="color3">
                        <label for="color3" class="color-option" style="background: #666666"></label>
                        
                        <input type="radio" name="categoryColor" value="#999999" id="color4">
                        <label for="color4" class="color-option" style="background: #999999"></label>
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn secondary" id="cancelCategoryBtn">Cancel</button>
                    <button type="submit" class="btn primary">Create Category</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Scripts -->
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</body>
</html>
